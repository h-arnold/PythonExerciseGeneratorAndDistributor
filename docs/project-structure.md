# Project Structure

This document describes the organisation of the PythonExerciseGeneratorAndDistributor repository (previously named PythonTutorExercises); please verify and update any remaining references to the old name to ensure consistency across all documentation.

## Directory Layout

``` text
PythonExerciseGeneratorAndDistributor/
├── .github/                   # Repo automation, workflows, and Copilot instructions
├── docs/                      # Project documentation and contributor guides
├── exercises/                 # Teacher materials and metadata
│   └── CONSTRUCT/TYPE/exNNN_slug/
├── notebooks/                 # Student-facing exercise notebooks
│   ├── exNNN_slug.ipynb       # One notebook per exercise
│   └── solutions/             # Instructor solution mirrors
├── python_tutor_exercises.egg-info/  # Packaging metadata generated by uv build steps
├── scripts/                   # Automation and utilities
│   ├── new_exercise.py
│   ├── verify_exercise_quality.py
│   ├── verify_solutions.sh
│   └── template_repo_cli/
├── template_repo_files/       # Source files for generating GitHub Classroom template repos
├── tests/                     # Automated pytest suites
│   └── template_repo_cli/
├── main.py
├── pyproject.toml
├── pytest.ini
├── README.md
└── TODO.md
```

## Key Directories

### `docs/`

Contributor-facing documentation covering setup, development workflow, testing, and exercise authoring. The `docs/agents/` subdirectory holds specifications for automated reviewers such as the tidy-code agent.

### `exercises/`

Teacher materials organised by construct and exercise type.

**Folder structure**: `exercises/CONSTRUCT/TYPE/exNNN_slug/`

Where:

- **CONSTRUCT** represents a curriculum concept (e.g., `sequence`)
- **TYPE** is one of: `debug`, `modify`, `make`

Each exercise folder contains:

- `README.md`: Exercise metadata (title, construct, difficulty, links)
- `OVERVIEW.md`: Pedagogical notes for teachers

Instructor reference solutions live in the solution notebook mirror under `notebooks/solutions/`.

- `OrderOfTeaching.md`: (at construct level) recommended exercise sequence

### `notebooks/`

Contains Jupyter notebooks where students complete exercises. Each notebook:

- Is named `exNNN_slug.ipynb` (e.g., `ex001_sanity.ipynb`)
- Contains one or more code cells tagged with `exerciseN` (e.g., `exercise1`, `exercise2`)
- Students write their solutions directly in these tagged cells
- The notebook provides context, examples, and instructions

The `notebooks/solutions/` subdirectory contains instructor solution mirrors that are identical to student notebooks but with completed exercise cells.

### `tests/`

Contains pytest-based automated grading and support tooling tests:

- `notebook_grader.py`: Core framework that extracts and executes tagged cells from notebooks
- `test_exNNN_slug.py`: Test files for each exercise that verify student solutions
- `test_debug_explanations.py`: Validates teacher-facing explanations that accompany debug exercises
- `template_repo_cli/`: Ensures the template-repo packaging CLI remains stable

Tests use `exec_tagged_code()` to extract student code from tagged cells and assert correctness.

Type guard helpers (using `typing.TypeGuard`) — place TypeGuard functions close to the module they validate. For module-level guards create a sibling `_typeguards.py` or `<module>_typeguards.py` next to the module they support. For shared or test-specific guards, use a `tests/typeguards/` package. Name guards `is_<name>` and include unit tests that verify both positive and negative cases.

### `scripts/`

Automation tools that help maintain the repository and publish exercises:

- `new_exercise.py`: Scaffolds new exercises (notebooks, tests, and metadata)
- `verify_exercise_quality.py`: Runs linting, tests, and structural checks used in CI and local development
- `verify_solutions.sh`: Convenience wrapper that executes tests against solution notebooks
- `template_repo_cli/`: CLI and utilities for packaging and publishing template repositories. The supporting modules expose a `run_subprocess()` wrapper that standardises subprocess handling for `git`/`gh` commands and simplifies testing by offering `capture`, `stream`, and `silent` output modes.

### `template_repo_files/`

Holds the canonical files used when generating GitHub Classroom template repositories. These assets are packaged and deployed via the template repo CLI.

### `.github/`

GitHub-specific configuration:

- `copilot-instructions.md`: Repo-wide custom instructions for GitHub Copilot
- `agents/exercise_generation.md.agent.md`: Custom agent for exercise generation
- `workflows/`: CI/CD workflows for testing

### Root files

- `pyproject.toml`: Defines project dependencies and tooling; `uv` uses this file to resolve and lock packages
- `pytest.ini`: Shared pytest settings for grading and infrastructure tests
- `README.md`: High-level project overview for contributors and students
- `TODO.md`: Backlog of maintenance and enhancement tasks
- `main.py`: Entry point used by distribution tooling and classic Python execution environments

## File Naming Conventions

- Exercise IDs: `exNNN` where NNN is a zero-padded number (e.g., `ex001`, `ex042`)
- Slugs: snake_case descriptive names (e.g., `variables_and_types`)
- Full exercise names: `exNNN_slug` (e.g., `ex001_sanity`)

## Tagged Cell System

Students write code in cells tagged with `exerciseN` in the cell metadata:

- Single-part exercises: one cell tagged `exercise1`
- Multi-part exercises: multiple cells tagged `exercise1`, `exercise2`, etc.

Tests extract these tagged cells using `notebook_grader.exec_tagged_code()` and execute them in isolation to verify correctness.

## Parallel Notebook Sets

The repository maintains two parallel sets of notebooks:

- **Student notebooks** (`notebooks/`): contain scaffolding and empty exercise cells
- **Solution notebooks** (`notebooks/solutions/`): identical structure with completed exercises

The same tests can run against either set:

- Default: `uv run pytest -q` (runs against student notebooks using the uv-managed environment)
- Solutions: `PYTUTOR_NOTEBOOKS_DIR=notebooks/solutions uv run pytest -q` (runs against solutions)

This allows verification that:

- Tests pass on known-good solutions
- Tests fail on incomplete student notebooks
